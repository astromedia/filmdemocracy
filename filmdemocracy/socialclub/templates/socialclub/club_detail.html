{% extends "socialclub/club_base.html" %}
{% load static %}
{% load widget_tweaks %}
{% load i18n %}

{% block title %}{% trans 'Club info' %}{% endblock %}

{% block content %}


<!--LINK TO FILM PANEL-->
<div>
  <form action="{% url 'democracy:candidate_films' club.id %}" class="text-center">
    <button type="submit" class="btn btn-success candidate-films-link">
      {% trans 'Vote candidate films' %}
    </button>
  </form>
</div>


<!--START: CLUB DESCRIPTION-->
<div class="markdownx-view">
  {{ club.formatted_club_panel|safe }}
</div>
<!--END: CLUB DESCRIPTION-->


<!--START: CLUB MEMBERS PANEL-->

<!--PICTURES-->
<div class="album club-members-panel shadow">
  <div class="container-fluid pb-3 pt-2 mb-n5 dark2-bg">

    <h4 class="lead text-center club-members-title light1-style">{% trans 'Club members' %}</h4>

    <hr class="mx-auto">

    <div class="row justify-content-center">

      {% for member in club_members %}
      <div class="col-auto mt-4">
        <div class="card border-0 dark2-bg" style="width: 8rem;">


          <a href="{% url 'socialclub:club_member_detail' club.id member.member.id %}">
            <div class="hovereffect-member">
              {% if member.member.profile_image %}
              <img class="card-img-top"
                   src="{{ member.member.profile_image.url }}"
                   alt="user.profile_image not found">
              {% else %}
              <img class="card-img-top"
                   src="{% static 'registration/user_no_profile_image.png' %}"
                   alt="user.profile_image not found">
              {% endif %}
            </div>
          </a>

          <div class="text-center p-1 light1-style dark2-bg">
            {{ member.member.username }}
          </div>

        </div>
      </div>
      {% endfor %}

    </div>

    <!--LEAVE BUTTON-->
    <div class="text-center my-5">
      <button type="button" class="btn btn-sm btn-outline-danger" data-toggle="modal"
              data-target="#LeaveModalCenter">
        {% trans 'Leave club' %}
      </button>
    </div>


  </div>
</div>
<!--END: CLUB MEMBERS PANEL-->


<!--START: MODAL LEAVE-->
<div class="modal fade" id="LeaveModalCenter" tabindex="-1" role="dialog" aria-labelledby="LeaveModalCenterTitle"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="LeaveModalCenterTitle">{% trans 'Leave club' %}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% trans 'Are you sure about this?' %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          {% trans 'Cancel' %}
        </button>
        <form method="post" action="{% url 'socialclub:leave_club' club.id %}" class="text-center">
          {% csrf_token %}
          <button type="submit" class="btn btn-outline-danger mr-3">
            {% trans 'Confirm' %}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
<!--END: MODAL LEAVE-->


{% endblock %}
