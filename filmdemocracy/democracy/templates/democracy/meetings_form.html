{% extends "democracy/base_club_banner.html" %}
{% load static %}
{% load widget_tweaks %}
{% load i18n %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'democracy/css/base_club_banner.css' %}">
<link rel="stylesheet" href="{% static 'democracy/css/meetings.css' %}">
{% endblock %}

{% block title %}
{% if new_meeting %}
  <h1 class="display-4">{% trans 'Organize new meeting' %}</h1>
{% else %}
  <h1 class="display-4">{% trans 'Edit meeting' %}</h1>
{% endif %}
{% endblock %}

{% block content %}


{% if new_meeting %}
  <h1 class="display-4">{% trans 'Organize meeting' %}</h1>
{% else %}
  <h1 class="display-4">{% trans 'Edit meeting' %}</h1>
{% endif %}



<!--START: MEETING FORM-->
<form class="form-meeting" method="POST" novalidate>
  {% csrf_token %}

  {% for hidden_field in form.hidden_fields %}
  {{ hidden_field }}
  {% endfor %}

  <div class="form-inputs">

    <!--NAME-->
    <div class="form-input-field">
      {{ form.name.label_tag }}
      {% if form.is_bound %}
      {% if form.name.errors %}
      {% render_field form.name class="form-control form-name is-invalid" %}
      {% else %}
      {% render_field form.name class="form-control form-name is-valid" %}
      {% endif %}
      {% else %}
      {% render_field form.name class="form-control form-name" %}
      {% endif %}
      {% for error in form.name.errors %}
      <div class="invalid-feedback">
        {{ error }}
      </div>
      {% endfor %}
    </div>

    <!--DESCRIPTION-->
    <div class="form-input-field">
      {{ form.description.label_tag }}
      {% if form.is_bound %}
      {% if form.description.errors %}
      {% render_field form.description class="form-control form-description is-invalid" %}
      {% else %}
      {% render_field form.description class="form-control form-description is-valid" %}
      {% endif %}
      {% else %}
      {% render_field form.description class="form-control form-description" %}
      {% endif %}
      {% for error in form.description.errors %}
      <div class="invalid-feedback">
        {{ error }}
      </div>
      {% endfor %}
    </div>

    <!--PLACE-->
    <div class="form-input-field">
      {{ form.place.label_tag }}
      {% if form.is_bound %}
      {% if form.place.errors %}
      {% render_field form.place class="form-control form-place is-invalid" %}
      {% else %}
      {% render_field form.place class="form-control form-place is-valid" %}
      {% endif %}
      {% else %}
      {% render_field form.place class="form-control form-place" %}
      {% endif %}
      {% for error in form.place.errors %}
      <div class="invalid-feedback">
        {{ error }}
      </div>
      {% endfor %}
    </div>

    <!--DATE-->
    <div class="form-input-field">
      {{ form.date.label_tag }}
      {% if form.is_bound %}
      {% if form.date.errors %}
      {% render_field form.date class="form-control date-field is-invalid" type="date" %}
      {% else %}
      {% render_field form.date class="form-control date-field is-valid" type="date" %}
      {% endif %}
      {% else %}
      {% render_field form.date class="form-control date-field" type="date" %}
      {% endif %}
      {% for error in form.date.errors %}
      <div class="invalid-feedback">
        {{ error }}
      </div>
      {% endfor %}
    </div>


    <!--DATE AND TIME-->
    <div class="form-row justify-content-center mx-5">


      <!--START TIME-->
      <div class="col-md-4">
        <div class="form-input-field">
          {{ form.time_start.label_tag }}
          {% if form.is_bound %}
          {% if form.time_start.errors %}
          {% render_field form.time_start class="form-control time-field is-invalid" type="time" %}
          {% else %}
          {% render_field form.time_start class="form-control time-field is-valid" type="time" %}
          {% endif %}
          {% else %}
          {% render_field form.time_start class="form-control time-field" type="time" %}
          {% endif %}
          {% for error in form.time_start.errors %}
          <div class="invalid-feedback">
            {{ error }}
          </div>
          {% endfor %}
        </div>
      </div>

    </div>

    <!--START: SEND NOTIFICATION EMAILS-->
    <div class="form-input-field" style="max-width: 99%">

      <!--NEW MEETING-->
      {% if new_meeting %}

      <div class="row align-items-center justify-content-center">
        <div class="col col-auto my-2">
          <strong>{% trans 'Send notification email to club members:' %}</strong>
        </div>
        <div class="col col-auto my-2">
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" name="send_spam" id="send_spam"
                   value="send_spam" checked>
            <label class="custom-control-label" for="send_spam"></label>
          </div>
        </div>
      </div>

      <!--EDIT MEETING-->
      {% else %}

      <div class="row align-items-start justify-content-center">
        <div class="col col-auto my-2">
          <strong>{% trans 'Send notification email to:' %}</strong>
        </div>
        <div class="col col-auto text-left my-2">
          <div class="custom-control custom-radio">
            <input type="radio" id="customRadio1" name="spam_options" value="all" class="custom-control-input" checked>
            <label class="custom-control-label" for="customRadio1">{% trans 'Club members' %}</label>
          </div>
          <div class="custom-control custom-radio">
            <input type="radio" id="customRadio2" name="spam_options" value="interested" class="custom-control-input">
            <label class="custom-control-label" for="customRadio2">{% trans 'Only members that checked the meeting' %}</label>
          </div>
          <div class="custom-control custom-radio">
            <input type="radio" id="customRadio3" name="spam_options" value="noone" class="custom-control-input">
            <label class="custom-control-label" for="customRadio3">{% trans 'No one' %}</label>
          </div>
        </div>
      </div>

      {% endif %}

    </div>
    <!--END: SEND NOTIFICATION EMAILS-->

  </div>

  <input class="btn btn-block btn-green-to-blue" type="submit" value="{% trans 'Publish' %}">

</form>
<!--END: MEETING FORM-->


<form class="btn-cancel" action="{% url 'democracy:club_detail' club.id %}">
  <button type="submit" class="btn btn-sm">{% trans 'Cancel' %}</button>
</form>


{% endblock %}
